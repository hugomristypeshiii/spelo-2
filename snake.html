<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Neon Serpent üêç</title>

<style>
body {
    margin: 0;
    background: radial-gradient(circle at center, #0c0c18, #05050d);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: white;
}

.wrapper {
    text-align: center;
}

h1 {
    color: #00ffe7;
    text-shadow: 0 0 20px #00ffe7;
    margin-bottom: 10px;
}

canvas {
    background: #0f0f1f;
    border-radius: 20px;
    box-shadow: 0 0 40px #00ffe7;
}

.score {
    margin-bottom: 10px;
}
</style>
</head>

<body>

<div class="wrapper">
    <h1>üêç Neon Serpent</h1>
    <div class="score">
        Score: <span id="score">0</span>
    </div>
    <canvas id="game" width="600" height="600"></canvas>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const size = 20;
const tileCount = canvas.width / size;

let snake = [
    {x: 15, y: 15},
    {x: 14, y: 15},
    {x: 13, y: 15}
];

let dx = 1, dy = 0;
let food = randomFood();
let score = 0;

const scoreEl = document.getElementById("score");

function randomFood() {
    return {
        x: Math.floor(Math.random()*tileCount),
        y: Math.floor(Math.random()*tileCount)
    };
}

function gameLoop(){
    update();
    draw();
}

function update(){
    const head = {
        x: (snake[0].x + dx + tileCount) % tileCount,
        y: (snake[0].y + dy + tileCount) % tileCount
    };

    // krock
    for(let s of snake){
        if(s.x === head.x && s.y === head.y){
            alert("Game Over üêç");
            location.reload();
        }
    }

    snake.unshift(head);

    if(head.x === food.x && head.y === food.y){
        score++;
        scoreEl.textContent = score;
        food = randomFood();
    } else {
        snake.pop();
    }
}

function drawCircle(x,y,r,color,glow=0){
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fillStyle = color;
    ctx.shadowBlur = glow;
    ctx.shadowColor = color;
    ctx.fill();
    ctx.shadowBlur = 0;
}

function draw(){
    ctx.fillStyle = "#0f0f1f";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // MAT (rund)
    drawCircle(
        food.x*size+size/2,
        food.y*size+size/2,
        size/3,
        "#ff2e88",
        20
    );

    // ORMEN
    snake.forEach((part,i)=>{
        const x = part.x*size+size/2;
        const y = part.y*size+size/2;

        const hue = 140 + i*5;
        const color = `hsl(${hue}, 100%, 50%)`;

        drawCircle(x,y,size/2.2,color,15);
    });

    // √ñGON p√• huvudet
    const head = snake[0];
    const hx = head.x*size+size/2;
    const hy = head.y*size+size/2;

    drawCircle(hx-4, hy-3, 3, "white");
    drawCircle(hx+4, hy-3, 3, "white");
}

document.addEventListener("keydown", e=>{
    if(e.key==="ArrowUp" && dy!==1){dx=0;dy=-1;}
    if(e.key==="ArrowDown" && dy!==- +1){dx=0;dy=1;}
    if(e.key==="ArrowLeft" && dx!==1){dx=-1;dy=0;}
    if(e.key==="ArrowRight" && dx!==-1){dx=1;dy=0;}
});

setInterval(gameLoop, 90);
</script>

</body>
</html>
