<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Neon Serpent üêç</title>

<style>
body {
    margin: 0;
    background: radial-gradient(circle, #0c0c18, #05050d);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: white;
}

/* wrapper */
.wrapper {
    position: relative;
    text-align: center;
}

h1 {
    color: #00ffe7;
    text-shadow: 0 0 20px #00ffe7;
    margin-bottom: 10px;
}

/* üî• MINDRE BANA */
canvas {
    background: #0f0f1f;
    border-radius: 20px;
    box-shadow: 0 0 40px #00ffe7;
}

/* score */
.score {
    margin-bottom: 10px;
}

/* üî• GAME OVER OVERLAY */
.overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.75);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border-radius: 20px;
}

.overlay h2 {
    font-size: 2.5rem;
    color: #ff2e88;
    text-shadow: 0 0 20px #ff2e88;
    margin-bottom: 20px;
}

button {
    padding: 12px 25px;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    background: #00ffe7;
    cursor: pointer;
    font-weight: bold;
}
</style>
</head>

<body>

<div class="wrapper">
    <h1>üêç Neon Serpent</h1>
    <div class="score">Score: <span id="score">0</span></div>

    <!-- mindre canvas -->
    <canvas id="game" width="420" height="420"></canvas>

    <div class="overlay" id="overlay">
        <h2>üíÄ GAME OVER</h2>
        <button onclick="restart()">Spela igen</button>
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const size = 20;
const tileCount = canvas.width / size;

let snake, dx, dy, food, score;
let running = true;

const scoreEl = document.getElementById("score");
const overlay = document.getElementById("overlay");

function init(){
    snake = [
        {x:10,y:10},
        {x:9,y:10},
        {x:8,y:10}
    ];
    dx = 1;
    dy = 0;
    food = randomFood();
    score = 0;
    scoreEl.textContent = 0;
    overlay.style.display = "none";
    running = true;
}

function randomFood(){
    return {
        x: Math.floor(Math.random()*tileCount),
        y: Math.floor(Math.random()*tileCount)
    };
}

function gameLoop(){
    if(!running) return;
    update();
    draw();
}

function update(){
    const head = {
        x: (snake[0].x + dx + tileCount) % tileCount,
        y: (snake[0].y + dy + tileCount) % tileCount
    };

    // krock med sig sj√§lv
    for(let s of snake){
        if(s.x === head.x && s.y === head.y){
            gameOver();
            return;
        }
    }

    snake.unshift(head);

    if(head.x === food.x && head.y === food.y){
        score++;
        scoreEl.textContent = score;
        food = randomFood();
    } else {
        snake.pop();
    }
}

function drawCircle(x,y,r,color,glow=0){
    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fillStyle = color;
    ctx.shadowBlur = glow;
    ctx.shadowColor = color;
    ctx.fill();
    ctx.shadowBlur = 0;
}

function draw(){
    ctx.fillStyle="#0f0f1f";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // mat
    drawCircle(food.x*size+size/2, food.y*size+size/2, size/3, "#ff2e88", 20);

    // orm
    snake.forEach((part,i)=>{
        const hue = 140 + i*6;
        drawCircle(
            part.x*size+size/2,
            part.y*size+size/2,
            size/2.2,
            `hsl(${hue},100%,50%)`,
            12
        );
    });

    // √∂gon
    const head = snake[0];
    const hx = head.x*size+size/2;
    const hy = head.y*size+size/2;
    drawCircle(hx-4,hy-3,3,"white");
    drawCircle(hx+4,hy-3,3,"white");
}

function gameOver(){
    running = false;
    overlay.style.display = "flex";
}

function restart(){
    init();
}

document.addEventListener("keydown", e=>{
    if(e.key==="ArrowUp" && dy!==1){dx=0;dy=-1;}
    if(e.key==="ArrowDown" && dy!==-1){dx=0;dy=1;}
    if(e.key==="ArrowLeft" && dx!==1){dx=-1;dy=0;}
    if(e.key==="ArrowRight" && dx!==-1){dx=1;dy=0;}
});

init();
setInterval(gameLoop, 90);
</script>

</body>
</html>
