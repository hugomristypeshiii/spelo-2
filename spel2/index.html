<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Space Shooter ğŸš€</title>

<style>
body{
    margin:0;
    background: radial-gradient(circle,#050510,#000);
    font-family:Arial;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:white;
}

.wrapper{text-align:center;position:relative}

canvas{
    background:black;
    border-radius:20px;
    box-shadow:0 0 40px cyan;
}

.overlay{
    position:absolute;
    inset:0;
    display:none;
    background:rgba(0,0,0,0.85);
    justify-content:center;
    align-items:center;
    flex-direction:column;
}

button{
    padding:12px 25px;
    margin-top:10px;
    border:none;
    border-radius:10px;
    font-weight:bold;
    cursor:pointer;
}

.home{background:#ff5555}
.play{background:#00ffe7}
</style>
</head>

<body>

<div class="wrapper">
<h1>ğŸš€ Space Shooter</h1>

<div>
Score: <span id="score">0</span> |
Highscore: <span id="high">0</span> |
Liv: <span id="lives">3</span>
</div>

<canvas id="game" width="420" height="500"></canvas>

<div class="overlay" id="over">
<h2>ğŸ’€ GAME OVER</h2>
<button class="play" onclick="restart()">Spela igen</button>
<button class="home" onclick="goHome()">â† Startsidan</button>
</div>
</div>

<script>
const c = game;
const ctx = c.getContext("2d");

let player, bullets, asteroids;
let score=0,lives=3,running=true,cd=0;
let high = localStorage.getItem("hs")||0;
highEl.textContent = high;

function init(){
player={x:190,y:440,w:40,h:40};
bullets=[];
asteroids=[];
score=0;
lives=3;
running=true;
scoreEl.textContent=0;
livesEl.textContent=3;
over.style.display="none";
}

function spawn(){
if(!running) return;

asteroids.push({
x:Math.random()*390,
y:-20,
size:20+Math.random()*20,
life:1+Math.floor(Math.random()*3),
speed:2
});
}

setInterval(spawn,1200);

function drawShip(){
ctx.save();
ctx.translate(player.x+20,player.y+20);

/* COOLARE SKEPP */
ctx.fillStyle="#00ffe7";
ctx.beginPath();
ctx.moveTo(0,-20);
ctx.lineTo(-15,15);
ctx.lineTo(-5,10);
ctx.lineTo(0,15);
ctx.lineTo(5,10);
ctx.lineTo(15,15);
ctx.closePath();
ctx.fill();

ctx.fillStyle="white";
ctx.beginPath();
ctx.arc(0,-5,5,0,6.28);
ctx.fill();

ctx.fillStyle="orange";
ctx.fillRect(-4,15,8,10);

ctx.restore();
}

function update(){

if(!running) return;

if(keys["ArrowLeft"]) player.x-=5;
if(keys["ArrowRight"]) player.x+=5;

bullets.forEach(b=>b.y-=10);
bullets=bullets.filter(b=>b.y>-10);

asteroids.forEach(a=>a.y+=a.speed);

/* collisions */
bullets.forEach((b,bi)=>{
asteroids.forEach((a,ai)=>{
if(b.x<a.x+a.size && b.x+4>a.x && b.y<a.y+a.size && b.y+10>a.y){
a.life--;
bullets.splice(bi,1);
if(a.life<=0){
asteroids.splice(ai,1);
score+=10;
scoreEl.textContent=score;
if(score>high){
high=score;
localStorage.setItem("hs",score);
highEl.textContent=score;
}
}
}
});
});

asteroids.forEach((a,i)=>{
if(a.y>500){
asteroids.splice(i,1);
lives--;
livesEl.textContent=lives;
if(lives<=0) gameOver();
}
});

if(cd>0) cd--;
}

function draw(){
ctx.fillStyle="black";
ctx.fillRect(0,0,420,500);

drawShip();

ctx.fillStyle="pink";
bullets.forEach(b=>ctx.fillRect(b.x,b.y,4,10));

ctx.fillStyle="gray";
asteroids.forEach(a=>{
ctx.beginPath();
ctx.arc(a.x,a.y,a.size/2,0,6.28);
ctx.fill();
});
}

function loop(){
update();
draw();
requestAnimationFrame(loop);
}

function shoot(){
if(cd>0) return;
bullets.push({x:player.x+18,y:player.y});
cd=8;
}

function gameOver(){
running=false;
over.style.display="flex";
}

function restart(){init();}

function goHome(){
window.location.href="../index.html";
}

/* controls */
let keys={};
document.addEventListener("keydown",e=>{
keys[e.key]=true;
if(e.key===" ") shoot();
});
document.addEventListener("keyup",e=>keys[e.key]=false);

init();
loop();
</script>

</body>
</html>
